<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Glossary - Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../status.html">Status</a></li><li class="chapter-item expanded "><a href="../functional_requirements.html"><strong aria-hidden="true">1.</strong> Functional Requirements</a></li><li class="chapter-item expanded "><a href="../modularization.html"><strong aria-hidden="true">2.</strong> Modularization</a></li><li class="chapter-item expanded "><a href="../performance_goals.html"><strong aria-hidden="true">3.</strong> Performance Goals</a></li><li class="chapter-item expanded "><a href="../threat_model.html"><strong aria-hidden="true">4.</strong> Threat Model</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../threat_model/methodology.html"><strong aria-hidden="true">4.1.</strong> Methodology</a></li><li class="chapter-item expanded "><a href="../threat_model/security_assumptions.html"><strong aria-hidden="true">4.2.</strong> Security Assumptions</a></li><li class="chapter-item expanded "><a href="../threat_model/application_assets.html"><strong aria-hidden="true">4.3.</strong> Application Assets</a></li><li class="chapter-item expanded "><a href="../threat_model/security_requirements.html"><strong aria-hidden="true">4.4.</strong> Security Requirements</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../threat_model/security_requirements/operators.html"><strong aria-hidden="true">4.4.1.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../threat_model/security_requirements/public.html"><strong aria-hidden="true">4.4.2.</strong> Public</a></li><li class="chapter-item expanded "><a href="../threat_model/security_requirements/users.html"><strong aria-hidden="true">4.4.3.</strong> Users</a></li><li class="chapter-item expanded "><a href="../threat_model/security_requirements/clients.html"><strong aria-hidden="true">4.4.4.</strong> Clients</a></li><li class="chapter-item expanded "><a href="../threat_model/security_requirements/federated_homeservers.html"><strong aria-hidden="true">4.4.5.</strong> Federated Homeservers</a></li><li class="chapter-item expanded "><a href="../threat_model/security_requirements/federated_users.html"><strong aria-hidden="true">4.4.6.</strong> Federated Users</a></li><li class="chapter-item expanded "><a href="../threat_model/security_requirements/federated_clients.html"><strong aria-hidden="true">4.4.7.</strong> Federated Clients</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../cryptographic_primitives.html"><strong aria-hidden="true">5.</strong> Cryptographic Primitives and Schemes</a></li><li class="chapter-item expanded "><a href="../spec.html"><strong aria-hidden="true">6.</strong> Specification (Draft)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../spec/authentication_service.html"><strong aria-hidden="true">6.1.</strong> Authentication service</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../spec/authentication_service/credentials.html"><strong aria-hidden="true">6.1.1.</strong> Credentials</a></li><li class="chapter-item expanded "><a href="../spec/authentication_service/evolving_identities.html"><strong aria-hidden="true">6.1.2.</strong> Evolving Identities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../spec/authentication_service/new_device_flow.html"><strong aria-hidden="true">6.1.2.1.</strong> Adding new devices</a></li></ol></li><li class="chapter-item expanded "><a href="../spec/authentication_service/connection_establishment.html"><strong aria-hidden="true">6.1.3.</strong> Discovery and connection esablishment</a></li><li class="chapter-item expanded "><a href="../spec/authentication_service/security_guarantees.html"><strong aria-hidden="true">6.1.4.</strong> Security Guarantees</a></li></ol></li><li class="chapter-item expanded "><a href="../spec/delivery_service.html"><strong aria-hidden="true">6.2.</strong> Delivery service</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../spec/delivery_service/group_state_encryption.html"><strong aria-hidden="true">6.2.1.</strong> Group state encryption</a></li><li class="chapter-item expanded "><a href="../spec/delivery_service/broken_state_detection.html"><strong aria-hidden="true">6.2.2.</strong> Broken state detection</a></li></ol></li><li class="chapter-item expanded "><a href="../spec/queuing_service.html"><strong aria-hidden="true">6.3.</strong> Queuing service</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../spec/queuing_service/queue_encryption.html"><strong aria-hidden="true">6.3.1.</strong> Queue encryption</a></li><li class="chapter-item expanded "><a href="../spec/queuing_service/keypackage_publication.html"><strong aria-hidden="true">6.3.2.</strong> KeyPackage publication</a></li></ol></li><li class="chapter-item expanded "><a href="../spec/clients.html"><strong aria-hidden="true">6.4.</strong> Work in progress: Clients</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../spec/clients/client_sync.html"><strong aria-hidden="true">6.4.1.</strong> Client synchronization</a></li></ol></li><li class="chapter-item expanded "><a href="../spec/future_work.html"><strong aria-hidden="true">6.5.</strong> Future work</a></li><li class="chapter-item expanded "><a href="../spec/glossary.html" class="active"><strong aria-hidden="true">6.6.</strong> Glossary</a></li></ol></li><li class="chapter-item expanded "><a href="../authentication_systems.html"><strong aria-hidden="true">7.</strong> Authentication in messaging applications</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../authentication_systems/concepts.html"><strong aria-hidden="true">7.1.</strong> Concepts and security properties</a></li><li class="chapter-item expanded "><a href="../authentication_systems/comparison.html"><strong aria-hidden="true">7.2.</strong> Comparison of existing applications</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Docs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="glossary"><a class="header" href="#glossary">Glossary</a></h1>
<h2 id="user-name-un"><a class="header" href="#user-name-un">User Name (UN)</a></h2>
<p>ID of a user consisting of a String qualified with the domain of the user's AS.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct UserName {
    as_domain: FQDN,
    user_name: String,
}
<span class="boring">}</span></code></pre></pre>
<h2 id="client-id-cid"><a class="header" href="#client-id-cid">Client ID (CID)</a></h2>
<p>ID of a user's client, qualified by the user name of the owner's user.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct ClientId {
    user_id: UserName,
    client_uuid: UUID,
}
<span class="boring">}</span></code></pre></pre>
<h2 id="qs-user-id-qsuid"><a class="header" href="#qs-user-id-qsuid">QS User ID (QsUid)</a></h2>
<p>The ID of a QS user record on the user's QS.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct QsUid {
    user_id: UUID,
}
<span class="boring">}</span></code></pre></pre>
<h2 id="qs-client-id-qscid"><a class="header" href="#qs-client-id-qscid">QS client ID (QsCid)</a></h2>
<p>The ID representing a client in the owning user's QS user record.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct PseudonymousClientId {
    qs_uid: QsUid,
    client_id: UUID,
}
<span class="boring">}</span></code></pre></pre>
<h2 id="queueconfig-encryption-key"><a class="header" href="#queueconfig-encryption-key">QueueConfig encryption key</a></h2>
<p>A public HPKE key owned by a homeserver's QS. It is used by the homeserver's clients to encrypt their <a href="glossary.html#sealed-queue-config">sealed queue configs</a>. The QS holds the private key so that it can decrypt the sealed queue configs when receiving messages.</p>
<h2 id="sealed-queue-config"><a class="header" href="#sealed-queue-config">Sealed queue config</a></h2>
<p>The sealed queue config is a struct that contains the information required by a DS to deliver messages to a client. In particular, the sealed queue config contains the following data.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct ClientQueueConfig {
    client_homeserver_domain: FQDN,
    sealed_config: SealedQueueConfig,
}

struct QueueConfig {
    option_push_token_key: Option&lt;PushTokenEarKey&gt;,
    pseudonymous_client_id: PseudonymousClientId,
}
<span class="boring">}</span></code></pre></pre>
<p>The <code>SealedQueueConfig</code> is the client's <code>QueueConfig</code> encrypted using HPKE in the asymmetrically authenticated mode using the <code>QueueConfigEncryptionKey</code> of the client's QS and the client's own <a href="glossary.html#qs-client-record-auth-key">QS QS client record key</a>.</p>
<h2 id="rolesextension"><a class="header" href="#rolesextension">RolesExtension</a></h2>
<p>An MLS group context extension that contains information on the roles of the individual members in a given group. A member's role can be either <em>admin</em> or <em>member</em>.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct RolesExtension {
    admins: Vec&lt;LeafIndex&gt;,
    members: Vec&lt;LeafIndex&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>If a user has multiple clients in a given group, all clients of that user MUST have the same role.</p>
<h3 id="future-work-manage-roles-via-proposal"><a class="header" href="#future-work-manage-roles-via-proposal">Future work: Manage roles via proposal</a></h3>
<p>For now, chaning roles requires a GroupContextExtension proposal, which can be expensive if there is more than one extension. Instead it should probably be possible to change roles via a custom proposal.</p>
<h2 id="welcome-attribution-info"><a class="header" href="#welcome-attribution-info">Welcome attribution info</a></h2>
<p>Encrypted under the recipient's friendship encryption key. The TBS has to be signed by the sender's client credential.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct WelcomeAttributionInfoPayload {
    sender_client_id: ClientId,
    group_credential_encryption_key: GroupCredentialEarKey,
}

struct WelcomeAttributionInfoTbs {
    payload: WelcomeAttributionInfoPayload,
    group_id: GroupId,
    welcome: Vec&lt;u8&gt;,
}

struct WelcomeAttributionInfo {
    payload: WelcomeAttributionInfoPayload,
    signature: Signature,
}
<span class="boring">}</span></code></pre></pre>
<h2 id="welcomebundle"><a class="header" href="#welcomebundle">WelcomeBundle</a></h2>
<p>A bundle allowing a client to join a new group.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct WelcomeBundle {
    welcome: Welcome,
    encrypted_welcome_attribution_info: Vec&lt;u8&gt;,
    encrypted_group_state_ear_key: Vec&lt;u8&gt;,
    group_id: GroupId,
}
<span class="boring">}</span></code></pre></pre>
<p>The WelcomeAttributionInfo is encrypted under the joining client's friendship encryption key. The group state EAR key is by the DS under the recipient's init key (contained in the recipient's KeyPackage).</p>
<h2 id="user-keypackage-batch"><a class="header" href="#user-keypackage-batch">User KeyPackage batch</a></h2>
<p>When a client retrieves KeyPackages from a QS for a given user, the QS responds with the KeyPackages, the associated Intermediate Client credentials, as well as a KeyPackageBatch.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct KeyPackageBatch {
  key_package_refs: Vec&lt;KeyPackageRef&gt;,
  timestamp: Timestamp,
  signature: Signature,
}
<span class="boring">}</span></code></pre></pre>
<h2 id="addpackage"><a class="header" href="#addpackage">AddPackage</a></h2>
<p>A struct consisting of a KeyPackage and the associated <a href="authentication_service/credentials.html#intermediate-client-credentials">Intermediate Client Credential</a>, where the latter is encrypted under the user's current <a href="glossary.html#friendship-encryption-key">friendship encryption key</a>.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct AddPackage {
    key_package: KeyPackage,
    icc_ciphertext: Vec&lt;u8&gt;,
}
<span class="boring">}</span></code></pre></pre>
<h2 id="friendship-keys"><a class="header" href="#friendship-keys">Friendship keys</a></h2>
<p>A set of keys known to users that the owning user has a <a href="authentication_service/connection_establishment.html">connection</a> with.</p>
<h3 id="friendship-encryption-key"><a class="header" href="#friendship-encryption-key">Friendship encryption key</a></h3>
<p>A symmetric key used to encrypt the credential information attached to KeyPackages, as well as the WelcomeAttributionInfo. This key is never rotated.</p>
<h4 id="future-work-rotate-friendship-encryption-key"><a class="header" href="#future-work-rotate-friendship-encryption-key">Future work: Rotate friendship encryption key</a></h4>
<p>Rotating the friendship encryption key can lead to annoying race conditions (e.g. a Welcome sent short before the key was rotated). If we want to rotate it, we could use key ids (see <a href="./delivery_service/group_state_encryption.html">here</a>) and a grace period before an old key is not accepted anymore.</p>
<h3 id="friendship-token"><a class="header" href="#friendship-token">Friendship token</a></h3>
<p>A random byte string that is used by users to prove that they have a <a href="authentication_service/connection_establishment.html">connection</a> with the owning user, which in turn allows them to fetch the user's key packages. Can be rotated by the owning user by updating the value on its QS and broadcasting it to all of the user's (remaining) connections.</p>
<h2 id="client-credential-chain"><a class="header" href="#client-credential-chain">Client credential chain</a></h2>
<p>A tuple consisting of an intermediate client credential and a client credential. Used to authenticate individual clients in the context of an MLS group. Stored on the DS encrypted under the group's <a href="delivery_service/group_state_encryption.html">credential encryption key</a>.</p>
<h2 id="queue-encryption-key"><a class="header" href="#queue-encryption-key">Queue encryption key</a></h2>
<p>HPKE public key associated with a client's fan-out or direct queue and used to facilitate <a href="queuing_service/queue_encryption.html">at-rest encryption of messages in the queue</a>.</p>
<h2 id="qs-client-record-auth-key"><a class="header" href="#qs-client-record-auth-key">QS client record auth key</a></h2>
<p>Signature public key associated with a QS QS client record. Used by the QS to authenticate the owning client.</p>
<h2 id="qs-user-record-auth-key"><a class="header" href="#qs-user-record-auth-key">QS user record auth key</a></h2>
<p>Signature public key associated with a QS user record. Used by the QS to authenticate the user's clients.</p>
<h2 id="qs-signing-key"><a class="header" href="#qs-signing-key">QS signing key</a></h2>
<p>Signature key used by federated QS' to authenticate the owning QS, as well as by a local or federated DS to verify signatures on <a href="./glossary.html#user-keypackage-batch">user KeyPackage batches</a>.</p>
<h2 id="fan-out-message"><a class="header" href="#fan-out-message">Fan out message</a></h2>
<p>Message sent from the DS to its local QS, either for forwarding to another QS or for enqueuing into a local queue.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum MessageContent {
    Commit(MlsMessage),
    Application(MlsMessage),
    WelcomeBundle(WelcomeBundle),
}

struct FanOutMessage {
    client_queue_configs: Vec&lt;ClientQueueConfig&gt;,
    message_content: MessageContent,
}
<span class="boring">}</span></code></pre></pre>
<h2 id="last-resort-extension"><a class="header" href="#last-resort-extension">Last resort extension</a></h2>
<p>A KeyPackage extension that marks the given KeyPackage as a <a href="https://www.ietf.org/archive/id/draft-ietf-mls-protocol-16.html#name-keypackage-reuse">KeyPackage of last resort</a>.</p>
<h2 id="push-token-encryption-key"><a class="header" href="#push-token-encryption-key">Push-token encryption key</a></h2>
<p>A symmetric encryption key that a client uses to encrypt its push-token on its QS QS client record. It is part of the client's encrypted <a href="glossary.html#sealed-queue-config">QueueConfig</a>.</p>
<h2 id="queueconfig-extension"><a class="header" href="#queueconfig-extension">QueueConfig extension</a></h2>
<p>A KeyPackage extension that contains a client's <a href="glossary.html#sealed-queue-config">ClientQueueConfig</a>. This extension is required for all KeyPackages uploaded to a QS.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../spec/future_work.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../authentication_systems.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../spec/future_work.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../authentication_systems.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
